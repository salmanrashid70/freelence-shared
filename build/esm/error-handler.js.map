{"version":3,"file":"error-handler.js","names":["StatusCodes","getReasonPhrase","CustomError","Error","constructor","message","statusCode","comingFrom","statusText","Object","setPrototypeOf","new","target","prototype","serializedError","BadRequestError","BAD_REQUEST","NotFoundError","NOT_FOUND","NotAuthorizedError","UNAUTHORIZED","FileTooLargeError","REQUEST_TOO_LONG","InternalServerError","INTERNAL_SERVER_ERROR","ServiceUnavailableError","SERVICE_UNAVAILABLE","ConflictError","CONFLICT","ForbiddenError","FORBIDDEN","TooManyRequestsError","TOO_MANY_REQUESTS"],"sources":["../../src/error-handler.ts"],"sourcesContent":["import { StatusCodes, getReasonPhrase } from 'http-status-codes';\r\n\r\nexport interface IErrorResponse {\r\n  message: string;\r\n  statusCode: number;\r\n  statusText: string;\r\n  comingFrom: string;\r\n  serializedError(): IError;\r\n}\r\nexport interface IError {\r\n  message: string;\r\n  statusCode: number;\r\n  statusText: string;\r\n  comingFrom: string;\r\n}\r\n\r\nexport interface ErrorNumberException extends Error {\r\n  errorNumber?: number;\r\n  errorCode?: string;\r\n  path?: string;\r\n  syscall?: string;\r\n  stack?: string;\r\n}\r\n\r\nexport abstract class CustomError extends Error implements IErrorResponse {\r\n  public statusCode: number;\r\n  public statusText: string;\r\n  public comingFrom: string;\r\n\r\n  constructor(message: string, statusCode: number, comingFrom = 'Unknown') {\r\n    super(message);\r\n    this.statusCode = statusCode;\r\n    this.statusText = getReasonPhrase(statusCode);\r\n    this.comingFrom = comingFrom;\r\n\r\n    // Ensures the custom error class maintains the correct prototype chain\r\n    // when compiled/transpiled from TypeScript to JavaScript, especially when extending built-in classes like Error.\r\n    Object.setPrototypeOf(this, new.target.prototype);\r\n  }\r\n\r\n  serializedError(): IError {\r\n    return {\r\n      message: this.message,\r\n      statusCode: this.statusCode,\r\n      statusText: this.statusText,\r\n      comingFrom: this.comingFrom,\r\n    };\r\n  }\r\n}\r\n\r\nexport class BadRequestError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.BAD_REQUEST, comingFrom);\r\n  }\r\n}\r\n\r\nexport class NotFoundError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.NOT_FOUND, comingFrom);\r\n  }\r\n}\r\n\r\nexport class NotAuthorizedError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.UNAUTHORIZED, comingFrom);\r\n  }\r\n}\r\n\r\nexport class FileTooLargeError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.REQUEST_TOO_LONG, comingFrom);\r\n  }\r\n}\r\n\r\nexport class InternalServerError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.INTERNAL_SERVER_ERROR, comingFrom);\r\n  }\r\n}\r\n\r\nexport class ServiceUnavailableError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.SERVICE_UNAVAILABLE, comingFrom);\r\n  }\r\n}\r\n\r\nexport class ConflictError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.CONFLICT, comingFrom);\r\n  }\r\n}\r\n\r\nexport class ForbiddenError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.FORBIDDEN, comingFrom);\r\n  }\r\n}\r\n\r\nexport class TooManyRequestsError extends CustomError {\r\n  constructor(message: string, comingFrom: string) {\r\n    super(message, StatusCodes.TOO_MANY_REQUESTS, comingFrom);\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,eAAe,QAAQ,mBAAmB;AAwBhE,OAAO,MAAeC,WAAW,SAASC,KAAK,CAA2B;EAKxEC,WAAWA,CAACC,OAAe,EAAEC,UAAkB,EAAEC,UAAU,GAAG,SAAS,EAAE;IACvE,KAAK,CAACF,OAAO,CAAC;IAAC,KALVC,UAAU;IAAA,KACVE,UAAU;IAAA,KACVD,UAAU;IAIf,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,UAAU,GAAGP,eAAe,CAACK,UAAU,CAAC;IAC7C,IAAI,CAACC,UAAU,GAAGA,UAAU;;IAE5B;IACA;IACAE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEC,GAAG,CAACC,MAAM,CAACC,SAAS,CAAC;EACnD;EAEAC,eAAeA,CAAA,EAAW;IACxB,OAAO;MACLT,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBC,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3BE,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3BD,UAAU,EAAE,IAAI,CAACA;IACnB,CAAC;EACH;AACF;AAEA,OAAO,MAAMQ,eAAe,SAASb,WAAW,CAAC;EAC/CE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAACgB,WAAW,EAAET,UAAU,CAAC;EACrD;AACF;AAEA,OAAO,MAAMU,aAAa,SAASf,WAAW,CAAC;EAC7CE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAACkB,SAAS,EAAEX,UAAU,CAAC;EACnD;AACF;AAEA,OAAO,MAAMY,kBAAkB,SAASjB,WAAW,CAAC;EAClDE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAACoB,YAAY,EAAEb,UAAU,CAAC;EACtD;AACF;AAEA,OAAO,MAAMc,iBAAiB,SAASnB,WAAW,CAAC;EACjDE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAACsB,gBAAgB,EAAEf,UAAU,CAAC;EAC1D;AACF;AAEA,OAAO,MAAMgB,mBAAmB,SAASrB,WAAW,CAAC;EACnDE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAACwB,qBAAqB,EAAEjB,UAAU,CAAC;EAC/D;AACF;AAEA,OAAO,MAAMkB,uBAAuB,SAASvB,WAAW,CAAC;EACvDE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAAC0B,mBAAmB,EAAEnB,UAAU,CAAC;EAC7D;AACF;AAEA,OAAO,MAAMoB,aAAa,SAASzB,WAAW,CAAC;EAC7CE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAAC4B,QAAQ,EAAErB,UAAU,CAAC;EAClD;AACF;AAEA,OAAO,MAAMsB,cAAc,SAAS3B,WAAW,CAAC;EAC9CE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAAC8B,SAAS,EAAEvB,UAAU,CAAC;EACnD;AACF;AAEA,OAAO,MAAMwB,oBAAoB,SAAS7B,WAAW,CAAC;EACpDE,WAAWA,CAACC,OAAe,EAAEE,UAAkB,EAAE;IAC/C,KAAK,CAACF,OAAO,EAAEL,WAAW,CAACgC,iBAAiB,EAAEzB,UAAU,CAAC;EAC3D;AACF","ignoreList":[]}